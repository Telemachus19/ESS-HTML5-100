<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Users List</title>
</head>

<body>

    <h2>Registered Users</h2>
    <a href="form.html">&larr; Add Another User</a>

    <table id="usersTable">
        <thead>
            <tr>
                <th>Name</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody>
        </tbody>
    </table>

    <script>
        document.addEventListener('DOMContentLoaded', loadTable);

        function loadTable() {
            const tbody = document.querySelector('#usersTable tbody');
            tbody.innerHTML = "";

            const storedUsers = JSON.parse(localStorage.getItem('usersList')) || [];
            // Empty predicate 
            if (storedUsers.length === 0) {
                tbody.innerHTML = "<tr><td colspan='3' class='empty-msg'>No users found.</td></tr>";
                return;
            }

            storedUsers.forEach((user, index) => {
                const tr = document.createElement('tr');

                tr.innerHTML = `
                    <td>${user.name}</td>
                    <td>
                        <button class="del" onclick="deleteUser(${index})">Delete</button>
                    </td>
                `;

                tbody.appendChild(tr);
            });
        }
        function deleteUser(index) {
            if (!confirm("Are you sure you want to delete this user?")) return;
            const storedUsers = JSON.parse(localStorage.getItem('usersList'));
            storedUsers.splice(index, 1);
            localStorage.setItem('usersList', JSON.stringify(storedUsers));
            loadTable();
        }
    </script>

</body>

</html>